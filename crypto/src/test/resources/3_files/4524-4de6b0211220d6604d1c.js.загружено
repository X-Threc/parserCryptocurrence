"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4524],{82579:function(e,t,n){n.d(t,{c:function(){return y}});var r=n(77460),o=n(52322),i=n(89230),a=n(2784),c=n(33724),u=n(5632),s=n(64771),d=n(24834),l=n(95223),p=n(16983),f=n(96053);function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var h=c.ZP.div.withConfig({componentId:"sc-1f7vvka-0"})(["width:",";height:",";border-radius:8px;overflow:hidden;position:relative;cursor:initial;> iframe{border:none;width:100%;height:100%;}"],(function(e){return e.detailPage?"100vw":"100%"}),(function(e){return e.detailPage?"100vh":"700px"})),v=c.ZP.p.withConfig({componentId:"sc-1f7vvka-1"})(["font-size:14px;font-weight:500;color:var(--color-light-neutral-6);cursor:pointer;position:absolute;right:24px;bottom:24px;> svg{vertical-align:top;margin-left:18px;}"]),b="lastSelectedDex",x={width:500,height:544,boxShadow:"0px 1px 2px rgb(128 138 157 / 12%), 0px 8px 32px rgb(128 138 157 / 24%)",borderRadius:24,position:"absolute",right:16,bottom:58,left:"unset",backdropFilter:"none",background:"var(--bg-color)"},w=function(e){var t=e.isWidgetMode,n=e.setExpanded;e.onTimeout;return(0,o.jsx)(i.xm,{title:"Please wait",subTitle:"We are loading the swap component",style:t?x:void 0,children:t&&(0,o.jsxs)(v,{onClick:function(){return n(!1)},children:["Close window",(0,o.jsx)(f.Z,{})]})})},y=function(e){var t=e.hasModal,n=e.coinInfo,r=e.style,i=void 0===r?{}:r,f=e.dex,m=e.setExpanded,v=void 0===m?function(){}:m,x=(0,c.Fg)().isDay,y=(0,u.useRouter)(),O=y.route,C=y.query,k=!O.includes("swap"),j=(0,s.ni)(null===n||void 0===n?void 0:n.platforms),S=(0,a.useState)(Array.from(j).map((function(e){return{id:e.id,loaded:!1}}))),E=S[0],Z=S[1],I=(0,a.useState)((function(){if(f)return f;var e=j.find((function(e){return e.inputCurrency.startsWith("0x")}));return(null===e||void 0===e?void 0:e.id)||j[0].id})),P=I[0],D=I[1],L=(0,a.useRef)(Array(j.length).fill(null)),B=(0,a.useState)([]),T=B[0],H=B[1];(0,a.useEffect)((function(){var e=localStorage.getItem(b);if(k&&e||e&&(0,p.xb)(C)){var t=s.gZ[e]||s.gZ.uni;D(t),H([t])}else H([P]);addEventListener("message",(function(e){switch(e.data.type){case"requestList":L.current.map((function(e){e&&e.contentWindow.postMessage({type:"dexesList",data:{dexes:j}},"*")}));break;case"changeDex":var t=e.data.id;D(t),H((function(e){return(0,p.RD)(e.concat(t))})),localStorage.setItem(b,t);break;case"copy":navigator.clipboard&&navigator.clipboard.writeText(e.data.data.text);break;case"ga-data":D((function(t){return e.data.data.action="Send - ".concat(t),d.Z.sendEvent(e.data.data),t}));break;case"jumpSwap":D((function(e){var t=(0,l.gT)(n?"/swap/".concat(n.slug,"/").concat(e,"/"):"/swap/",!1);return d.Z.sendEvent({category:"Swap",action:"Widget to full screen",label:t}),location.href=t,e}));break;case"modal":switch(e.data.data.open){case!0:L.current.map((function(e){e&&(e.scrollIntoViewIfNeeded?e.scrollIntoViewIfNeeded(!0):e.scrollIntoView({behavior:"smooth"}))}))}break;default:return null}}))}),[]);return(0,o.jsx)(h,{style:g({zIndex:t?1e6:void 0},i),detailPage:k,children:j.map((function(e,t){var n=e.host,r=e.inputCurrency,i=e.outputCurrency,c=(e.chainId,e.id),u=E.find((function(e){return e.id===c}));return T.includes(c)?(0,o.jsxs)(a.Fragment,{children:[!u.loaded&&(0,o.jsx)(w,{isWidgetMode:k,setExpanded:v}),(0,o.jsx)("iframe",{src:"".concat(n,"/#/swap?inputCurrency=").concat(r,"&outputCurrency=").concat(i,"&theme=").concat(x?"day":"night","&page=").concat(k?"detail":"swap"),style:{display:P===c&&u.loaded?void 0:"none"},onLoad:function(){return function(e){return Z((function(t){return t.reduce((function(t,n){return n.id===e&&(n.loaded=!0),t.concat(n)}),[])}))}(c)},ref:function(e){return L.current[t]=e}})]},c):null}))})}},24002:function(e,t,n){var r=n(52322),o=n(16983),i=n(33724),a=n(82579),c=n(2784),u=n(15490),s=n(44615),d=n(51192),l=n(64771),p=n(22037),f=n(4543),m=n(24834),g=i.ZP.div.withConfig({componentId:"t4voxl-0"})(["position:fixed;right:0px;bottom:0px;z-index:999999;cursor:pointer;@media (max-width:","px){display:none;}> button:first-child{transform:none;transition:all 0.3s ease;opacity:1;position:absolute;right:16px;bottom:58px;width:auto;white-space:nowrap;&.loading{opacity:0;transform:translateX(200%);pointer-events:none;}padding:12px 17px;height:48px;background:var(--theme-color);border-radius:200px;font-size:14px;font-weight:600;text-align:right;color:#fff;&:hover,&:focus{background:var(--theme-color);color:#fff;}> img{vertical-align:sub;margin-right:10px;width:18px;height:20px;}}> div:nth-child(2){transition:all 0.3s ease;z-index:999;}"],p.AV.XSMALL);t.Z=function(e){var t=e.info,n=e.useLazyLoad,i=(0,c.useState)(!1),p=i[0],h=i[1],v=(0,c.useState)(!1),b=v[0],x=v[1],w=(0,s.v9)(d.Qy),y=(0,l.pT)();(0,c.useEffect)((function(){p&&m.Z.sendEvent({category:"Swap",action:"Widget expanded",label:!0})}),[p]),(0,c.useEffect)((function(){addEventListener("message",(function(e){"dismiss"===e.data.type&&h(!1)}))}),[]);var O=(0,c.useMemo)((function(){return t&&t.platforms.some((function(e){return l.KC.includes(e.contractChainId)||"ETH"===t.symbol||"BNB"===t.symbol}))}),[null===t||void 0===t?void 0:t.platforms]);return w||y?null:(0,r.jsxs)(g,{children:[(0,r.jsxs)(f.Z,{className:p?"loading":"",onClick:function(){h(!0),x(!0)},children:[(0,r.jsx)("img",{src:(0,u.ZP)("/cloud/img/swap/swap.svg")}),"Swap".concat(O?" ".concat((0,o.kC)(t.symbol)):"")]}),n&&!b?null:(0,r.jsx)(a.c,{coinInfo:t,finishLoading:function(){h(!0)},setExpanded:h,style:{display:p?void 0:"none"}})]})}},64771:function(e,t,n){n.d(t,{gZ:function(){return m},KC:function(){return v},ni:function(){return O},pT:function(){return C}});var r,o,i,a,c=n(77460),u=n(16983),s=n(7216),d=n(44615),l=n(51192);function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){(0,c.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var m={uni:"uniswap",mdexHECO:"mdexHECO",mdexBSC:"mdexBSC",pancake:"pancake"},g=(r={},(0,c.Z)(r,m.pancake,"BNB"),(0,c.Z)(r,m.uni,"ETH"),(0,c.Z)(r,m.mdexHECO,"HT"),(0,c.Z)(r,m.mdexBSC,"BNB"),r),h=(o={},(0,c.Z)(o,m.pancake,"0xe9e7cea3dedca5984780bafc599bd69add087d56"),(0,c.Z)(o,m.uni,"0xdac17f958d2ee523a2206206994597c13d831ec7"),(0,c.Z)(o,m.mdexHECO,"0xa71edc38d189767582c38a3145b5873052c3e47a"),(0,c.Z)(o,m.mdexBSC,"0xe9e7cea3dedca5984780bafc599bd69add087d56"),o),v=[1,56,128],b=(i={},(0,c.Z)(i,m.uni,s.isLocalDev?"http://localhost:3001":"/cmcswapstatic/uniswap"),(0,c.Z)(i,m.mdexBSC,s.isLocalDev?"http://localhost:3002":"/cmcswapstatic/mdexBSC"),(0,c.Z)(i,m.mdexHECO,s.isLocalDev?"http://localhost:3003":"/cmcswapstatic/mdexHECO"),(0,c.Z)(i,m.pancake,s.isLocalDev?"http://localhost:3004":"/cmcswapstatic/pancake"),i),x=(a={},(0,c.Z)(a,m.uni,{order:0,chainId:1,host:b[m.uni],id:m.uni,logo:"./images/Uniswap.png",name:"Uniswap",outputCurrency:h[m.uni],network:"Ethereum",networkID:"ethereum",networkLogo:"./images/ethereum.png"}),(0,c.Z)(a,m.pancake,{order:1,chainId:56,host:b[m.pancake],id:m.pancake,logo:"./images/pancakeswap.png",name:"Pancake",outputCurrency:h[m.pancake],network:"BSC",networkID:"bsc",networkLogo:"./images/bsc.png"}),(0,c.Z)(a,m.mdexBSC,{order:2,chainId:56,host:b[m.mdexBSC],id:m.mdexBSC,logo:"./images/mdex.png",name:"Mdex",outputCurrency:h[m.mdexBSC],network:"BSC",networkID:"bsc",networkLogo:"./images/bsc.png"}),(0,c.Z)(a,m.mdexHECO,{order:3,chainId:128,host:b[m.mdexHECO],id:m.mdexHECO,logo:"./images/mdex.png",name:"Mdex",outputCurrency:h[m.mdexHECO],network:"Heco",networkID:"heco",networkLogo:"./images/heco.png"}),a),w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m.uni;return x[e]||x[m.uni]},y=[f({inputCurrency:g[m.uni]},w(m.uni)),f({inputCurrency:g[m.pancake]},w(m.pancake)),f({inputCurrency:g[m.mdexBSC]},w(m.mdexBSC)),f({inputCurrency:g[m.mdexHECO]},w(m.mdexHECO))],O=function(e){if(!e)return y;var t=e.filter((function(e){return v.includes(e.contractChainId)}));if(!t.length)return y;var n=t.map((function(e){return t=e.contractAddress,n=e.contractChainId,Object.values(x).filter((function(e){return e.chainId===n})).map((function(e){return f({inputCurrency:t},e)}));var t,n})).flat().concat(y);return(0,u.RD)(n,(function(e,t){return e.id===t.id})).sort((function(e,t){return e.order-t.order}))},C=function(){var e=(0,d.v9)(l.bX),t=(0,d.v9)(l.PX);return e||t}},4959:function(e,t,n){var r,o=n(2784),i=n(63025),a=n(15490),c=n(98676),u=n(23493),s=n.n(u),d=n(900),l=n(7216),p=15e3,f={},m=!1;function g(e){var t,n;null!==e&&void 0!==e&&null!==(t=e.d)&&void 0!==t&&null!==(n=t.cr)&&void 0!==n&&n.id&&(f[e.d.cr.id]=e)}var h=s()((function(){m=!0,Object.keys(f).forEach((function(e){i.Z.emit("".concat(i.V.priceUpdate,"-").concat(e),f[e])})),f={},m=!1}),3e3,{leading:!1,trailing:!0});t.Z=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=(0,o.useRef)(null),u=(0,o.useRef)(!1),s=0,f=function(){window.addEventListener("beforeunload",(function(){v(),o.close()})),u.current=!0,r=null;var o=new WebSocket((0,a.MS)("/price/latest")),l={timeout:3e5,timeoutObj:null,serverTimeoutObj:null,reset:function(){clearTimeout(this.timeoutObj),clearTimeout(this.serverTimeoutObj),this.start()},start:function(){var e=this;this.timeoutObj=setTimeout((function(){o.send("ping"),e.serverTimeoutObj=setTimeout((function(){o.close()}),e.timeout)}),this.timeout)}};o.onopen=function(){l.start(),n.current=o,u.current=!1;var i={method:"subscribe",id:"price",data:{cryptoIds:e,index:t}};o.send(JSON.stringify(i)),p=15e3,clearTimeout(r)},o.onmessage=function(e){var t,n;l.reset();var r=JSON.parse(e.data);if("500"!==r.s&&null!==r&&void 0!==r&&null!==(t=r.d)&&void 0!==t&&null!==(n=t.cr)&&void 0!==n&&n.id){if(c.Z.updateByWebsocket(r),i.Z.emit(i.V.priceUpdate,r),m)return;g(r),h()}else v()},o.onclose=function(e){if(!u.current){var t=(0,d.fp)("wsLifeCircle");if(Date.now()-t>114e4)return null;s<3?(r=setTimeout(b,Math.min(6e4,p)),p*=2):clearTimeout(r)}},o.onerror=function(e){console.error("Socket encountered error: ",e.message,"Closing socket"),o.close()}},v=function(){var e=n.current;e&&e.send(JSON.stringify({method:"unsubscribe",id:"unsubscribePrice"}))},b=function(){var e=n.current;s++,e&&e.readyState!==WebSocket.CLOSED||f()};(0,o.useEffect)((function(){n.current&&(v(),n.current.close()),e&&e.length&&!l.isLocalDev&&f()}),[e.join()])}}}]);
//# sourceMappingURL=4524-4de6b0211220d6604d1c.js.map